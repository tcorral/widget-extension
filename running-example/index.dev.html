<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/xml; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- add theme -->
    <link href="bower_components/theme-default/dist/styles/base.css" rel="stylesheet">
    <link rel="stylesheet" href="dist/styles/base.css" type="text/css"/>
    <!-- add main libs only dev required -->
    <script>window.requirejs || document.write("<script src='bower_components/requirejs/require.js'>\x3C/script>");</script>
    <script>window.jQuery || document.write("<script src='bower_components/jquery/dist/jquery.js'>\x3C/script>");</script>
    <script>window.angular || document.write("<script src='bower_components/angular/angular.js'>\x3C/script>");</script>
    <script src="bower_components/config/requirejs.conf.js"></script>
    <script type="text/javascript">
        (function (root) {
            'use strict';

            var launchpad = root.launchpad || {};
            var staticPath = launchpad.staticRoot ? launchpad.staticRoot : 'bower_components';
            var isSameStaticAndStaticRoot = staticPath === launchpad.staticRoot;
            var modulesPath = isSameStaticAndStaticRoot ? '/features/[BBHOST]/' : '/';
            var widgetsPath = isSameStaticAndStaticRoot ? '/widgets/[BBHOST]/' : '/';

            require.config({
                paths: {
                    'base-widget': staticPath + modulesPath + 'base-widget/scripts',
                    'module-test': staticPath + modulesPath + 'module-test/scripts',
                    'module-test-path': staticPath + modulesPath + 'module-test',
                    'module-test-extended': staticPath + modulesPath + 'module-test-extended/scripts',
                    'module-test-extended-path': staticPath + modulesPath + 'module-test-extended'
                },
                // Register packages
                packages: [
                    'base-widget',
                    'module-test',
                    'module-test-extended'
                ]
            });
        }(window));
    </script>
    <script>
        require(['base', 'mock'], function (base, mock) {
            window.b$ = {portal: mock.Portal()};
            window.bd = mock.Bd();
            window.launchpad = mock.launchpad;
            window.gadgets = mock.gadgets;

            mock.Widget({
                preferences: {
                    test: 10
                }
            })
                    .then(function (__WIDGET__) {
                        base.requireWidget(__WIDGET__, 'dist/scripts/main');
                    });
        });
    </script>

</head>

<body class="extension-test">
    <div ng-include="template"></div>
</body>
</html>
