<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/xml; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- add theme -->
    <link href="bower_components/theme-default/dist/styles/base.css" rel="stylesheet">
    <link rel="stylesheet" href="dist/styles/base.css" type="text/css"/>
    <!-- add main libs only dev required -->
    <script>window.requirejs || document.write("<script src='bower_components/requirejs/require.js'>\x3C/script>");</script>
    <script>window.jQuery || document.write("<script src='bower_components/jquery/dist/jquery.js'>\x3C/script>");</script>
    <script>window.angular || document.write("<script src='bower_components/angular/angular.js'>\x3C/script>");</script>
    <script src="bower_components/config/requirejs.conf.js"></script>
    <script type="text/javascript" src="bower_components/my-config/require.conf.js"></script>
    <script type="text/javascript">
        function injectHTML(widget) {
            var staticPath = 'bower_components';
            var modulesPath = '/';
            var template = staticPath + modulesPath + widget.getPreference('main:module') + '/templates/' + widget.getPreference('main:template');
            $.ajax({
                        url: template,
                        dataType: 'text'
                    })
                    .then(function (html) {
                        widget.body.innerHTML = html;
                    });
        }
    </script>
    <script>
        requirejs.config({
            //By default load any module IDs from js/lib
            baseUrl: '.',
            paths: {
                base: 'bower_components/base/dist/scripts',
                mock: 'bower_components/mock/dist/scripts',
                core: 'bower_components/core/dist/scripts',
                lodash: 'bower_components/lodash/lodash.min',
                moment: 'bower_components/moment/min/moment-with-locales.min',
                'angular-dynamic-locale': 'bower_components/angular-dynamic-locale/dist/tmhDynamicLocale',
                'angular-sanitize': 'bower_components/angular-sanitize/angular-sanitize.min',
                'angular-resource': 'bower_components/angular-resource/angular-resource.min',
                'angular-translate': 'bower_components/angular-translate/angular-translate.min'
            },
            packages: [
                'base',
                'mock',
                'core'
            ]
        });

        require(['base', 'mock'], function (base, mock) {
            window.b$ = {portal: mock.Portal()};
            window.bd = mock.Bd();
            //window.launchpad = mock.launchpad;
            window.gadgets = mock.gadgets;

            mock.Widget({
                        preferences: {
                            test: 10
                        }
                    })
                    .then(function (__WIDGET__) {
                        base.requireWidget(__WIDGET__, 'dist/scripts/main');
                        injectHTML(__WIDGET__)
                    });
        });
    </script>

</head>

<body class="extension-test">
</body>
</html>
